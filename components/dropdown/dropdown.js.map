{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["dropdown.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,qBAQO,eAAe,CAAC,CAAA;AAavB;IAKE,kBAAiC,EAAU;QAL7C,iBAqCC;QApCW,SAAI,GAAsB,IAAI,mBAAY,EAAE,CAAC;QAC7C,UAAK,GAAsB,IAAI,mBAAY,EAAE,CAAC;QACjD,WAAM,GAAY,KAAK,CAAC;QAG7B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YAClB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,EAAE,CAAC,CAAC,qBAAa,IAAI,qBAAa,KAAK,KAAI,CAAC,CAAC,CAAC;gBAC5C,qBAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC;YACD,qBAAa,GAAG,KAAI,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACnB,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,EAAE,CAAC,CAAC,qBAAa,KAAK,KAAI,CAAC,CAAC,CAAC;gBAC3B,qBAAa,GAAG,SAAS,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QACtB,CAAC;IACH,CAAC;IAED,8BAAW,GAAX;QACE,EAAE,CAAC,CAAC,qBAAa,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,qBAAa,GAAG,SAAS,CAAC;QAC5B,CAAC;IACH,CAAC;IAED,qCAAkB,GAAlB;QACE,EAAE,CAAC,CAAC,qBAAa,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC;IACH,CAAC;IAnCD;QAAC,aAAM,EAAE;;0CAAA;IACT;QAAC,aAAM,EAAE;;2CAAA;IAVX;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,IAAI,EAAE;gBACJ,8CAA8C;gBAC9C,gBAAgB,EAAE,sBAAsB;gBACxC,cAAc,EAAE,QAAQ;aACzB;SACF,CAAC;mBAMc,gBAAS,CAAC,OAAO,CAAC;;gBANhC;IAsCF,eAAC;AAAD,CAAC,AArCD,IAqCC;AArCY,gBAAQ,WAqCpB,CAAA;AAUD;IAIE,wBACkB,QAAkB,EACd,EAAU;QADd,aAAQ,GAAR,QAAQ,CAAU;QAJpC,aAAQ,GAAY,IAAI,CAAC;QAOvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IAED,qCAAY,GAAZ,UAAa,CAAQ;QACnB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,yBAAyB;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QAAA,CAAC;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAID,sBAAI,0CAAc;aAAlB;YACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,GAAG,OAAO,CAAC;QACjD,CAAC;;;OAAA;IAJD;QAAC,kBAAW,CAAC,oBAAoB,CAAC;;wDAAA;IA9BpC;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;YAC5B,IAAI,EAAE;gBACJ,SAAS,EAAE,sBAAsB;gBACjC,gBAAgB,EAAE,iBAAiB;gBACnC,sBAAsB,EAAE,MAAM;aAC/B;SACF,CAAC;mBAMG,WAAI,EAAE;mBACN,gBAAS,CAAC,OAAO,CAAC;;sBAPrB;IA4BF,qBAAC;AAAD,CAAC,AA3BD,IA2BC;AA3BY,sBAAc,iBA2B1B,CAAA;AAEY,2BAAmB,GAAe,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC","sourcesContent":["import {\n  Directive,\n  HostBinding,\n  EventEmitter,\n  Host,\n  Attribute,\n  OnDestroy,\n  Output,\n} from '@angular/core';\n\n\nexport var currentlyOpen: Dropdown;\n\n@Directive({\n  selector: '.dropdown',\n  host: {\n    // '(document:click)': 'haltDisabledEvents()',\n    '(document:tap)': 'haltDisabledEvents()',\n    '[class.open]': 'isOpen'\n  }\n})\nexport class Dropdown implements OnDestroy {\n  @Output() open: EventEmitter<any> = new EventEmitter();\n  @Output() close: EventEmitter<any> = new EventEmitter();\n  public isOpen: boolean = false;\n\n  constructor( @Attribute('class') cl: string) {\n    this.open.subscribe(() => {\n      this.isOpen = true;\n      if (currentlyOpen && currentlyOpen !== this) {\n        currentlyOpen.close.emit(null);\n      }\n      currentlyOpen = this;\n    });\n    this.close.subscribe(() => {\n      this.isOpen = false;\n      if (currentlyOpen === this) {\n        currentlyOpen = undefined;\n      }\n    });\n\n    let open = cl.includes('open');\n    if (open) {\n      this.open.emit(null)\n    }\n  }\n\n  ngOnDestroy() {\n    if (currentlyOpen === this) {\n      currentlyOpen = undefined;\n    }\n  }\n\n  haltDisabledEvents() {\n    if (currentlyOpen === this) {\n      this.close.emit(null);\n    }\n  }\n}\n\n@Directive({\n  selector: '.dropdown-toggle',\n  host: {\n    '(click)': 'setMousedown($event)',\n    '[class.active]': 'dropdown.isOpen',\n    '[attr.aria-haspopup]': 'true'\n  }\n})\nexport class DropdownToggle {\n  disabled: boolean = null;\n  classes: string;\n\n  constructor(\n    @Host() private dropdown: Dropdown,\n    @Attribute('class') cl: string\n  ) {\n    this.disabled = cl.includes('disabled');\n  }\n\n  setMousedown(e: Event) {\n    e.stopPropagation();\n    // ignore disabled clicks\n    if (this.disabled) { return; };\n    if (this.dropdown.isOpen) {\n      this.dropdown.close.emit(null);\n    } else {\n      this.dropdown.open.emit(null);\n    }\n  }\n\n  @HostBinding('attr.aria-expanded')\n  /** Gets the aria-expanded value for the component, which must be a string for Dart. */\n  get isAriaExpanded(): string {\n    return this.dropdown.isOpen ? 'true' : 'false';\n  }\n}\n\nexport const DROPDOWN_DIRECTIVES: Array<any> = [Dropdown, DropdownToggle];\n"]}