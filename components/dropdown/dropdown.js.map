{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Directive,\n  Component,\n  HostBinding,\n  EventEmitter,\n  Host,\n  Attribute,\n  Output,\n} from '@angular/core';\n\n@Component({\n  selector: '.dropdown',\n  host: {\n    '(touchend)': 'ontouchend($event)',\n    '[class.open]': 'isOpen',\n  },\n  template: `\n    <div *ngIf=\"isOpen\"\n         (click)=\"backdropClick($event)\"\n         class=\"dropdown-backdrop\">\n    </div>\n    <ng-content></ng-content>\n  `,\n})\nexport class Dropdown {\n  @Output() open: EventEmitter<any> = new EventEmitter();\n  @Output() close: EventEmitter<any> = new EventEmitter();\n  public isOpen: boolean = false;\n  public isMobileOpen: boolean = false;\n\n  constructor( @Attribute('class') cl: string) {\n    this.open.subscribe(() => {\n      this.isOpen = true;\n    });\n    this.close.subscribe(() => {\n      this.isOpen = false;\n    });\n\n    let open = cl.includes('open');\n    if (open) {\n      this.open.emit(null);\n    }\n  }\n  backdropClick(event: Event) {\n    if (this.isOpen) {\n      this.close.emit(null);\n      event.stopPropagation();\n    }\n  }\n  ontouchend() {\n    this.isMobileOpen = true;\n  }\n}\n\n\n@Directive({\n  selector: '.dropdown-toggle',\n  host: {\n    '(click)': 'setMousedown($event)',\n    '[class.active]': 'dropdown.isOpen',\n    '[attr.aria-haspopup]': 'true',\n  },\n})\nexport class DropdownToggle {\n  disabled: boolean = null;\n  classes: string;\n\n  constructor(\n    @Host() private dropdown: Dropdown,\n    @Attribute('class') cl: string\n  ) {\n    this.disabled = cl.includes('disabled');\n  }\n\n  setMousedown(e: Event) {\n    // e.stopPropagation();\n    // ignore disabled clicks\n    if (this.disabled) { return; };\n    if (this.dropdown.isOpen) {\n      this.dropdown.close.emit(null);\n    } else {\n      this.dropdown.open.emit(null);\n    }\n    event.stopPropagation();\n  }\n\n  @HostBinding('attr.aria-expanded')\n  get isAriaExpanded(): string {\n    return this.dropdown.isOpen ? 'true' : 'false';\n  }\n}\n\n@Directive({\n  selector: '.dropdown-menu',\n  host: {\n    '(click)': 'setMousedown($event)'\n  },\n})\nexport class DropdownMenu {\n  disabled: boolean = null;\n  classes: string;\n\n  constructor(@Host() private dropdown: Dropdown) {}\n\n  setMousedown(e: Event) {\n    if (this.dropdown.isOpen) {\n      this.dropdown.close.emit(null);\n    } else {\n      this.dropdown.open.emit(null);\n    }\n  }\n}\n\nexport const DROPDOWN_DIRECTIVES: Array<any> = [Dropdown, DropdownToggle, DropdownMenu];\n"]}