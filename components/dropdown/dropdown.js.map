{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Directive,\n  Component,\n  HostBinding,\n  EventEmitter,\n  Host,\n  Attribute,\n  Output,\n} from '@angular/core';\n\n@Component({\n  selector: '.dropdown',\n  host: {\n    '(document:touchend)': 'ontouchend($event)',\n    '(document:click)': 'documentClick($event)',\n    '[class.open]': 'isOpen',\n  },\n  template: `\n    <div *ngIf=\"isMobileOpen && isOpen\" (click)=\"backdropClick($event)\" class=\"dropdown-backdrop\"></div>\n    <ng-content></ng-content>\n  `,\n})\nexport class Dropdown {\n  @Output() open: EventEmitter<any> = new EventEmitter();\n  @Output() close: EventEmitter<any> = new EventEmitter();\n  public isOpen: boolean = false;\n  public isMobileOpen: boolean = false;\n\n  constructor( @Attribute('class') cl: string) {\n    this.open.subscribe(() => {\n      this.isOpen = true;\n    });\n    this.close.subscribe(() => {\n      this.isOpen = false;\n    });\n\n    let open = cl.includes('open');\n    if (open) {\n      this.open.emit(null);\n    }\n  }\n\n  backdropClick(event: Event) {\n    console.log('backdrop')\n    if (this.isOpen) {\n      this.close.emit(null);\n      event.stopPropagation();\n    }\n  }\n  documentClick(event: Event) {\n    if (this.isOpen) {\n      this.close.emit(null);\n    }\n  }\n  ontouchend() {\n    console.log('touched')\n    this.isMobileOpen = true;\n  }\n}\n\n@Directive({\n  selector: '.dropdown-toggle',\n  host: {\n    '(click)': 'setMousedown($event)',\n    '[class.active]': 'dropdown.isOpen',\n    '[attr.aria-haspopup]': 'true'\n  }\n})\nexport class DropdownToggle {\n  disabled: boolean = null;\n  classes: string;\n\n  constructor(\n    @Host() private dropdown: Dropdown,\n    @Attribute('class') cl: string\n  ) {\n    this.disabled = cl.includes('disabled');\n  }\n\n  setMousedown(e: Event) {\n    // e.stopPropagation();\n    // ignore disabled clicks\n    if (this.disabled) { return; };\n    if (this.dropdown.isOpen) {\n      this.dropdown.close.emit(null);\n    } else {\n      this.dropdown.open.emit(null);\n    }\n  }\n\n  @HostBinding('attr.aria-expanded')\n  /** Gets the aria-expanded value for the component, which must be a string for Dart. */\n  get isAriaExpanded(): string {\n    return this.dropdown.isOpen ? 'true' : 'false';\n  }\n}\n\nexport const DROPDOWN_DIRECTIVES: Array<any> = [Dropdown, DropdownToggle];\n"]}